"use strict";(self.webpackChunkdashboard=self.webpackChunkdashboard||[]).push([[732],{5736:(e,t,n)=>{n.d(t,{A:()=>l});var r=n(31601),o=n.n(r),a=n(76314),i=n.n(a)()(o());i.push([e.id,".schedule-container{color:#fff;font-size:13px;margin-bottom:10px}.schedule-date-today{background-color:var(--mui-palette-main-main) !important;color:#fff !important}.schedule-date{background-color:#e7c24a;padding:5px;color:#000;border:1px solid rgba(255,255,255,.52);cursor:pointer}.schedule-date:first-child{border-top-left-radius:4px}.schedule-date:last-child{border-top-right-radius:4px}.schedule-item{padding:5px;border:1px solid rgba(124,119,119,.52);color:#f6f6f6}.schedule-project-name{font-weight:bold}[data-mui-color-scheme=dark] .schedule-date{background-color:#1d575c;color:#fff;border:1px solid rgba(124,119,119,.52)}.hover-animation{transition:transform .3s ease,box-shadow .3s ease}.hover-animation:hover{transform:translateY(-2px);box-shadow:0 2px 8px rgba(0,0,0,.1)}",""]);const l=i},10732:(e,t,n)=>{n.r(t),n.d(t,{default:()=>j});var r=n(74848),o=n(96540),a=n(56655),i=n(85072),l=n.n(i),s=n(97825),d=n.n(s),c=n(77659),u=n.n(c),h=n(55056),p=n.n(h),f=n(10540),m=n.n(f),x=n(41113),g=n.n(x),v=n(5736),b={};b.styleTagTransform=g(),b.setAttributes=p(),b.insert=u().bind(null,"head"),b.domAPI=d(),b.insertStyleElement=m(),l()(v.A,b),v.A&&v.A.locals&&v.A.locals;var w=n(97529),y=function(){return y=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},y.apply(this,arguments)};function j(e){var t,n,i=(0,o.useState)(null),l=i[0],s=i[1],d=(0,o.useState)([]),c=d[0],u=d[1],h=(0,o.useState)(null),p=h[0],f=h[1],m=(new Date).toLocaleString("default",{day:"numeric",month:"short"});return(0,o.useEffect)((function(){fetch("/api/weekly-schedules/",{credentials:"include",method:"GET",headers:{Accept:"application/json","X-CSRFToken":window.csrftoken}}).then((function(e){return e.json()})).then((function(e){u(e.dates);var t=e.dates.map((function(e){return new Date(e).toLocaleString("default",{day:"numeric",month:"short"})}));s(t);for(var n=[],r=0,o=e.schedules;r<o.length;r++){var a=o[r];n.push({duration:a.duration,schedule:a.id?a:null,startTime:a.start_time,endTime:a.end_time})}f(n)}))}),[]),(0,r.jsxs)("div",y({className:"schedule-container"},{children:[(0,r.jsx)("div",y({style:{display:"flex",width:"100%"}},{children:l?l.map((function(e,t){return(0,r.jsx)("div",y({className:"schedule-date "+(e===m?" schedule-date-today":""),style:{flex:1,cursor:"pointer"},onClick:function(){return window.location.href="/planning"}},{children:e}),t)})):null})),l&&p&&c.length>0?(0,r.jsx)("div",y({style:{display:"flex",flexDirection:"column",width:"100%"}},{children:(t=p.filter((function(e){return e.schedule})),n=[],t.forEach((function(e){var t,r,o,a=(t=e.startTime,r=c,(o=new Date(t)).setHours(0,0,0,0),r.findIndex((function(e){var t=new Date(e);return t.setHours(0,0,0,0),t.getTime()===o.getTime()})));if(-1!==a){for(var i=a+e.duration-1,l=-1,s=0;s<n.length;s++)if(!n[s].some((function(e){var t=e.dayIndex,n=t+e.duration-1;return!(i<t||a>n)}))){l=s;break}-1===l&&(l=n.length,n.push([])),n[l].push(y(y({},e),{dayIndex:a}))}})),n.map((function(t,n){return(0,r.jsx)("div",y({style:{display:"flex",width:"100%",position:"relative",height:"70px"}},{children:t.map((function(t,n){var o=t.dayIndex/5*100,i=t.duration/5*100;return(0,r.jsx)(a.A,y({title:t.schedule.notes||"",arrow:!0,placement:"top",enterDelay:500},{children:(0,r.jsxs)("div",y({style:{position:"absolute",left:"".concat(o,"%"),width:"".concat(i,"%"),cursor:e.timerRunning?"not-allowed":"pointer",backgroundColor:(0,w.Z6)(t.schedule.project_name),padding:"8px",boxSizing:"border-box",height:"70px"},className:"hover-animation schedule-item",onClick:function(){e.timerRunning?alert("Please stop the running timer first."):e.scheduleClicked(t.schedule.project_id,t.schedule.project_name,t.schedule.task_id,t.schedule.task_label)}},{children:[(0,r.jsx)("div",y({className:"schedule-project-name"},{children:t.schedule.project_name})),(0,r.jsx)("div",y({style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},{children:t.schedule.task_label})),t.schedule.notes?(0,r.jsx)("div",y({style:{marginTop:2,alignItems:"center"}},{children:(0,r.jsxs)("span",y({style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}},{children:["üìù ",t.schedule.notes.split("\n")[0]]}))})):null]}))}),n)}))}),n)})))})):null]}))}}}]);