"use strict";(self.webpackChunkdashboard=self.webpackChunkdashboard||[]).push([[841],{36541:function(e,t,n){var r=n(8081),a=n.n(r),s=n(23645),d=n.n(s)()(a());d.push([e.id,".schedule-container{color:#fff;font-size:13px;margin-bottom:10px}.schedule-date{background-color:#e7c24a;padding:5px;color:#000;border:1px solid rgba(255,255,255,.52);cursor:pointer}.schedule-date:first-child{border-top-left-radius:4px}.schedule-date:last-child{border-top-right-radius:4px}.schedule-item{padding:5px;border:1px solid rgba(124,119,119,.52);color:#f6f6f6}.schedule-project-name{font-weight:bold}[data-mui-color-scheme=dark] .schedule-date{background-color:#1d575c;color:#fff;border:1px solid rgba(124,119,119,.52)}",""]),t.Z=d},6841:function(e,t,n){n.r(t),n.d(t,{default:function(){return k}});var r=n(85893),a=n(67294),s=n(74518),d=n(93379),l=n.n(d),i=n(7795),c=n.n(i),o=n(90569),u=n.n(o),h=n(3565),f=n.n(h),p=n(19216),m=n.n(p),b=n(44589),g=n.n(b),v=n(36541),x={};x.styleTagTransform=g(),x.setAttributes=f(),x.insert=u().bind(null,"head"),x.domAPI=c(),x.insertStyleElement=m(),l()(v.Z,x),v.Z&&v.Z.locals&&v.Z.locals;var j=n(78473),T=function(){return T=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},T.apply(this,arguments)};function k(e){var t=(0,a.useState)(null),n=t[0],d=t[1],l=(0,a.useState)(null),i=l[0],c=l[1];function o(e,t){var n=Math.abs(new Date(e)-new Date(t));return Math.round(n/864e5)}return(0,a.useEffect)((function(){fetch("/api/weekly-schedules/",{credentials:"include",method:"GET",headers:{Accept:"application/json","X-CSRFToken":window.csrftoken}}).then((function(e){return e.json()})).then((function(e){var t=e.dates.map((function(e){return new Date(e).toLocaleString("default",{day:"numeric",month:"short"})}));d(t);for(var n=null,r=[],a=0,s=0,l=e.dates;s<l.length;s++)for(var i=l[s],u=0,h=e.schedules;u<h.length;u++){var f=h[u],p=f.start_time.split("T")[0],m=f.end_time.split("T")[0];if(p==i)if(p==e.dates[0])r.push({duration:o(m,p)+1,schedule:f,startTime:p,endTime:m}),n=m;else{if(!n||new Date(p)<=new Date(n)){if(n&&o(n,e.dates[e.dates.length-1])>0){var b={duration:o(n,e.dates[e.dates.length-1]),schedule:null,endTime:e.dates[e.dates.length-1],startTime:e.dates[e.dates.indexOf(n)+1]};r.push(b),a+=1}var g={duration:o(p,e.dates[0]),schedule:null,endTime:e.dates[0],startTime:e.dates[e.dates.indexOf(p)+1]};r.push(g),a+=1}var v=o(m,p)+1,x=!1;if(a>0)for(var j=0,T=0,k=r;T<k.length;T++){var w=k[T];if(j+=1,!w.schedule&&w.duration==v&&w.startTime==p&&w.endTime==m){r[j-1].schedule=f,x=!0;break}}x||r.push({duration:v,schedule:f,startTime:p,endTime:m}),n=m}}c(r)}))}),[]),(0,r.jsxs)("div",T({className:"schedule-container"},{children:[(0,r.jsx)(s.ZP,T({container:!0},{children:n?n.map((function(e){return(0,r.jsx)(s.ZP,T({className:"schedule-date",item:!0,xs:2.4,onClick:function(){return window.location.href="/planning"}},{children:e}))})):""})),n&&i?(0,r.jsx)(s.ZP,T({container:!0},{children:i.map((function(e){return(0,r.jsx)(s.ZP,T({style:{backgroundColor:e.schedule?(0,j.vC)(e.schedule.project_name):"inherit"},className:e.schedule?"schedule-item":"schedule-empty",item:!0,xs:2.4*e.duration},{children:e.schedule?(0,r.jsxs)("div",{children:[(0,r.jsx)("div",T({className:"schedule-project-name"},{children:e.schedule.project_name})),(0,r.jsx)("div",{children:e.schedule.task_label})]}):null}))}))})):null]}))}}}]);