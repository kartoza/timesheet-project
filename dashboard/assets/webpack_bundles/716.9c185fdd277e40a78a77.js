"use strict";(self.webpackChunkdashboard=self.webpackChunkdashboard||[]).push([[716],{26716:(e,n,t)=>{t.r(n),t.d(n,{default:()=>O});var r,a,o=t(74848),i=t(96540),l=t(84719),s=t(15849),c=t(45347),d=t(1043),u=t(84798),p=t(42571),f=t(93814),h=t(22217),x=t(27135),m=t(65997),j=t(90639),g=t(99682),y=t(72297),b=t(17437),A=t(45359),k=t(13945),v=t(52561),C=t(73896),w=t(18987),S=function(){return S=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},S.apply(this,arguments)},R=function(e,n,t){if(t||2===arguments.length)for(var r,a=0,o=n.length;a<o;a++)!r&&a in n||(r||(r=Array.prototype.slice.call(n,0,a)),r[a]=n[a]);return e.concat(r||Array.prototype.slice.call(n))},D=window.isStaff,E=(0,b.i7)(P||(r=["\n    from {\n        opacity: 0;\n        transform: translateY(20px);\n    }\n    to {\n        opacity: 1;\n        transform: translateY(0);\n    }\n"],a=["\n    from {\n        opacity: 0;\n        transform: translateY(20px);\n    }\n    to {\n        opacity: 1;\n        transform: translateY(0);\n    }\n"],Object.defineProperty?Object.defineProperty(r,"raw",{value:a}):r.raw=a,P=r));const O=function(e){var n=e.project,t=e.projectLinkList,r=(0,i.useState)(null),a=r[0],b=r[1],O=(0,i.useState)(""),P=O[0],I=O[1],L=(0,i.useState)(""),T=L[0],F=L[1],N=(0,i.useState)(""),W=N[0],Y=N[1],M=(0,i.useState)(!1),U=M[0],q=M[1],H=(0,i.useState)(!1),J=H[0],X=H[1],z=(0,i.useState)(!1),B=z[0],V=z[1],_=(0,i.useState)([]),G=_[0],K=_[1];if((0,i.useEffect)((function(){K(t)}),[t]),!n)return(0,o.jsx)(o.Fragment,{});var Q=function(){b(null),V(!1)};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(l.A,S({className:"project-link-container",sx:{display:"flex",gap:.5,flexWrap:"wrap",alignItems:"center"}},{children:[G.slice(0,5).map((function(e,n){return(0,o.jsx)(s.A,S({title:e.name,placement:"top"},{children:(0,o.jsxs)(l.A,S({sx:{position:"relative",display:"inline-block"}},{children:[(0,o.jsx)(p.A,S({color:"secondary",variant:"outlined",onClick:function(){return window.open(e.link,"_blank")},sx:{display:"flex",alignItems:"center",justifyContent:"center",position:"relative",animation:"".concat(E," 0.1s ease-out"),animationDelay:"".concat(.1*n,"s"),animationFillMode:"forwards",opacity:0,transition:"transform 0.3s ease, box-shadow 0.3s ease","&:hover":{transform:"scale(1.05)",boxShadow:"0px 4px 10px rgba(0, 0, 0, 0.2)"}}},{children:"DIA"===e.category?(0,o.jsx)(f.A,{}):"CHA"===e.category?(0,o.jsx)(h.A,{}):"DOC"===e.category?(0,o.jsx)(x.A,{}):"REP"===e.category?(0,o.jsx)(m.A,{}):(0,o.jsx)(j.A,{})})),D&&(0,o.jsx)(p.A,S({color:"primary",variant:"contained",onClick:function(n){return function(e,n){e.stopPropagation(),b(n),I(n.name),F(n.link),Y(n.category),q(!1),X(!1),V(!1)}(n,e)},sx:{position:"absolute",top:-6,right:-6,minWidth:15,width:15,height:15,padding:0,borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0px 2px 4px rgba(0,0,0,0.2)","& .MuiButton-startIcon":{margin:0},"&:hover":{backgroundColor:"rgba(0,0,0,0.1)"}}},{children:(0,o.jsx)(y.default,{style:{fontSize:"8pt"}})}))]}))}),e.name)})),D&&(0,o.jsx)(s.A,S({title:"Add new project link",placement:"top"},{children:(0,o.jsx)(p.A,S({color:"success",variant:"outlined",onClick:function(){b(null),I(""),F(""),Y(""),q(!1),X(!1),V(!0)},sx:{display:"flex",alignItems:"center",justifyContent:"center",animation:"".concat(E," 0.1s ease-out"),animationDelay:"".concat(.1*t.slice(0,5).length,"s"),animationFillMode:"forwards",opacity:0,transition:"transform 0.3s ease, box-shadow 0.3s ease","&:hover":{transform:"scale(1.05)",boxShadow:"0px 4px 10px rgba(0, 0, 0, 0.2)"}}},{children:(0,o.jsx)(g.A,{})}))}))]})),(0,o.jsx)(c.A,S({open:null!==a||B,onClose:Q,"aria-labelledby":"edit-project-link-modal","aria-describedby":"edit-project-link-modal-description"},{children:(0,o.jsxs)(l.A,S({sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",borderRadius:"8px",boxShadow:24,p:4}},{children:[(0,o.jsxs)("h2",S({id:"edit-project-link-modal"},{children:[B?"Add":"Edit"," Project Link"]})),(0,o.jsx)(d.A,{label:"Name",value:P,onChange:function(e){I(e.target.value),q(""===e.target.value.trim())},error:U,helperText:U?"Name is required":"",fullWidth:!0,margin:"normal"}),(0,o.jsx)(d.A,{label:"Link",type:"url",value:T,onChange:function(e){F(e.target.value);try{new URL(e.target.value),X(!1)}catch(e){X(!0)}},error:J,helperText:J?"Valid URL is required":"",fullWidth:!0,margin:"normal"}),(0,o.jsxs)(A.A,S({fullWidth:!0,margin:"normal"},{children:[(0,o.jsx)(k.A,S({id:"category-label"},{children:"Category"})),(0,o.jsxs)(v.A,S({labelId:"category-label",label:"Category",value:W,onChange:function(e){return Y(e.target.value)}},{children:[(0,o.jsx)(C.A,S({value:"DOC"},{children:"Documentation"})),(0,o.jsx)(C.A,S({value:"CHA"},{children:"Chat"})),(0,o.jsx)(C.A,S({value:"REP"},{children:"Repository"})),(0,o.jsx)(C.A,S({value:"DIA"},{children:"Diagram"}))]}))]})),(0,o.jsxs)(l.A,S({sx:{mt:2,display:"flex",justifyContent:"flex-end"}},{children:[(0,o.jsx)(u.A,S({onClick:Q,sx:{mr:1}},{children:"Cancel"})),null!==a?(0,o.jsx)(p.A,S({color:"error",onClick:function(e){return function(e,n){var t;e.stopPropagation(),t=n.id,window.confirm("Are you sure you want to delete this project link?")&&fetch("/project-link/",{credentials:"include",method:"DELETE",body:JSON.stringify({id:t}),headers:{"Content-Type":"application/json","X-CSRFToken":w.A.get("csrftoken")}}).then((function(e){if(!e.ok)throw new Error("Failed to delete project link");K((function(e){return e.filter((function(e){return e.id!==t}))})),b(null),I(""),F(""),Y("")})).catch((function(e){console.error("Error:",e)}))}(e,a)},style:{marginRight:5}},{children:"Delete"})):null,(0,o.jsx)(u.A,S({variant:"contained",onClick:function(){if(P.trim()){q(!1);try{new URL(T),X(!1)}catch(e){return void X(!0)}var e={name:P,link:T,category:W};a?e.id=a.id:e.project=n.id,fetch("/project-link/",{credentials:"include",method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json",Accept:"application/json","X-CSRFToken":w.A.get("csrftoken")}}).then((function(e){return e.json()})).then((function(e){console.log("Saved changes:",e),K(a?function(n){return n.map((function(n){return n.id===e.id?e:n}))}:function(n){return R(R([],n,!0),[e],!1)})})).catch((function(e){console.error("Error:",e)})),b(null),I(""),F(""),Y(""),V(!1)}else q(!0)},color:"success",disabled:U||J||""===P.trim()||""===T.trim()},{children:"Save"}))]}))]}))}))]})};var P}}]);