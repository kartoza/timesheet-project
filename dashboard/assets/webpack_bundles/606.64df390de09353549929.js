"use strict";(self.webpackChunkdashboard=self.webpackChunkdashboard||[]).push([[606],{9606:function(e,n,t){t.r(n);var r,o,a,i=t(85893),l=t(67294),s=t(99226),c=t(52141),d=t(25827),u=t(22715),p=t(82060),f=t(91409),h=t(80878),x=t(56914),m=t(10206),j=t(70062),g=t(38807),y=t(72428),b=t(51797),k=t(70917),v=t(53640),Z=t(60076),C=t(16012),w=t(33797),S=t(31955),R=function(){return R=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var o in n=arguments[t])Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o]);return e},R.apply(this,arguments)},A=function(e,n,t){if(t||2===arguments.length)for(var r,o=0,a=n.length;o<a;o++)!r&&o in n||(r||(r=Array.prototype.slice.call(n,0,o)),r[o]=n[o]);return e.concat(r||Array.prototype.slice.call(n))},D=window.isStaff,E=(0,k.F4)(r||(o=["\n    from {\n        opacity: 0;\n        transform: translateY(20px);\n    }\n    to {\n        opacity: 1;\n        transform: translateY(0);\n    }\n"],a=["\n    from {\n        opacity: 0;\n        transform: translateY(20px);\n    }\n    to {\n        opacity: 1;\n        transform: translateY(0);\n    }\n"],Object.defineProperty?Object.defineProperty(o,"raw",{value:a}):o.raw=a,r=o));n.default=function(e){var n=e.project,t=e.projectLinkList,r=(0,l.useState)(null),o=r[0],a=r[1],k=(0,l.useState)(""),O=k[0],P=k[1],F=(0,l.useState)(""),I=F[0],L=F[1],T=(0,l.useState)(""),N=T[0],W=T[1],Y=(0,l.useState)(!1),M=Y[0],U=Y[1],q=(0,l.useState)(!1),H=q[0],J=q[1],X=(0,l.useState)(!1),z=X[0],B=X[1],V=(0,l.useState)([]),_=V[0],G=V[1];if((0,l.useEffect)((function(){G(t)}),[t]),!n)return(0,i.jsx)(i.Fragment,{});var K=function(){a(null),B(!1)};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(s.Z,R({className:"project-link-container",sx:{display:"flex",gap:.5,flexWrap:"wrap",alignItems:"center"}},{children:[_.slice(0,5).map((function(e,n){return(0,i.jsx)(c.Z,R({title:e.name,placement:"top"},{children:(0,i.jsxs)(s.Z,R({sx:{position:"relative",display:"inline-block"}},{children:[(0,i.jsx)(f.Z,R({color:"secondary",variant:"outlined",onClick:function(){return window.open(e.link,"_blank")},sx:{display:"flex",alignItems:"center",justifyContent:"center",position:"relative",animation:"".concat(E," 0.1s ease-out"),animationDelay:"".concat(.1*n,"s"),animationFillMode:"forwards",opacity:0,transition:"transform 0.3s ease, box-shadow 0.3s ease","&:hover":{transform:"scale(1.05)",boxShadow:"0px 4px 10px rgba(0, 0, 0, 0.2)"}}},{children:"DIA"===e.category?(0,i.jsx)(h.Z,{}):"CHA"===e.category?(0,i.jsx)(x.Z,{}):"DOC"===e.category?(0,i.jsx)(m.Z,{}):"REP"===e.category?(0,i.jsx)(j.Z,{}):(0,i.jsx)(g.Z,{})})),D&&(0,i.jsx)(f.Z,R({color:"primary",variant:"contained",onClick:function(n){return function(e,n){e.stopPropagation(),a(n),P(n.name),L(n.link),W(n.category),U(!1),J(!1),B(!1)}(n,e)},sx:{position:"absolute",top:-6,right:-6,minWidth:15,width:15,height:15,padding:0,borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0px 2px 4px rgba(0,0,0,0.2)","& .MuiButton-startIcon":{margin:0},"&:hover":{backgroundColor:"rgba(0,0,0,0.1)"}}},{children:(0,i.jsx)(b.default,{style:{fontSize:"8pt"}})}))]}))}),e.name)})),D&&(0,i.jsx)(c.Z,R({title:"Add new project link",placement:"top"},{children:(0,i.jsx)(f.Z,R({color:"success",variant:"outlined",onClick:function(){a(null),P(""),L(""),W(""),U(!1),J(!1),B(!0)},sx:{display:"flex",alignItems:"center",justifyContent:"center",animation:"".concat(E," 0.1s ease-out"),animationDelay:"".concat(.1*t.slice(0,5).length,"s"),animationFillMode:"forwards",opacity:0,transition:"transform 0.3s ease, box-shadow 0.3s ease","&:hover":{transform:"scale(1.05)",boxShadow:"0px 4px 10px rgba(0, 0, 0, 0.2)"}}},{children:(0,i.jsx)(y.Z,{})}))}))]})),(0,i.jsx)(d.Z,R({open:null!==o||z,onClose:K,"aria-labelledby":"edit-project-link-modal","aria-describedby":"edit-project-link-modal-description"},{children:(0,i.jsxs)(s.Z,R({sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:400,bgcolor:"background.paper",borderRadius:"8px",boxShadow:24,p:4}},{children:[(0,i.jsxs)("h2",R({id:"edit-project-link-modal"},{children:[z?"Add":"Edit"," Project Link"]})),(0,i.jsx)(u.Z,{label:"Name",value:O,onChange:function(e){P(e.target.value),U(""===e.target.value.trim())},error:M,helperText:M?"Name is required":"",fullWidth:!0,margin:"normal"}),(0,i.jsx)(u.Z,{label:"Link",type:"url",value:I,onChange:function(e){L(e.target.value);try{new URL(e.target.value),J(!1)}catch(e){J(!0)}},error:H,helperText:H?"Valid URL is required":"",fullWidth:!0,margin:"normal"}),(0,i.jsxs)(v.Z,R({fullWidth:!0,margin:"normal"},{children:[(0,i.jsx)(Z.Z,R({id:"category-label"},{children:"Category"})),(0,i.jsxs)(C.Z,R({labelId:"category-label",label:"Category",value:N,onChange:function(e){return W(e.target.value)}},{children:[(0,i.jsx)(w.Z,R({value:"DOC"},{children:"Documentation"})),(0,i.jsx)(w.Z,R({value:"CHA"},{children:"Chat"})),(0,i.jsx)(w.Z,R({value:"REP"},{children:"Repository"})),(0,i.jsx)(w.Z,R({value:"DIA"},{children:"Diagram"}))]}))]})),(0,i.jsxs)(s.Z,R({sx:{mt:2,display:"flex",justifyContent:"flex-end"}},{children:[(0,i.jsx)(p.Z,R({onClick:K,sx:{mr:1}},{children:"Cancel"})),null!==o?(0,i.jsx)(f.Z,R({color:"error",onClick:function(e){return function(e,n){var t;e.stopPropagation(),t=n.id,window.confirm("Are you sure you want to delete this project link?")&&fetch("/project-link/",{credentials:"include",method:"DELETE",body:JSON.stringify({id:t}),headers:{"Content-Type":"application/json","X-CSRFToken":S.Z.get("csrftoken")}}).then((function(e){if(!e.ok)throw new Error("Failed to delete project link");G((function(e){return e.filter((function(e){return e.id!==t}))})),a(null),P(""),L(""),W("")})).catch((function(e){console.error("Error:",e)}))}(e,o)},style:{marginRight:5}},{children:"Delete"})):null,(0,i.jsx)(p.Z,R({variant:"contained",onClick:function(){if(O.trim()){U(!1);try{new URL(I),J(!1)}catch(e){return void J(!0)}var e={name:O,link:I,category:N};o?e.id=o.id:e.project=n.id,fetch("/project-link/",{credentials:"include",method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json",Accept:"application/json","X-CSRFToken":S.Z.get("csrftoken")}}).then((function(e){return e.json()})).then((function(e){console.log("Saved changes:",e),G(o?function(n){return n.map((function(n){return n.id===e.id?e:n}))}:function(n){return A(A([],n,!0),[e],!1)})})).catch((function(e){console.error("Error:",e)})),a(null),P(""),L(""),W(""),B(!1)}else U(!0)},color:"success",disabled:M||H||""===O.trim()||""===I.trim()},{children:"Save"}))]}))]}))}))]})}}}]);